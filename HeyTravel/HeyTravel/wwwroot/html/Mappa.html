<!DOCTYPE html>
<script>mapboxgl.accessToken = 'pk.eyJ1IjoiZGFueXJlZHMiLCJhIjoiY2t5Zm1zdDNyMGVlbzJvbmFlNXY5YXAwZCJ9.NJg7y8ASm8cyNmNHdo3lLw';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/danyreds/ckzmpnpey001h15oatavzcetr',
            center: [9.8, 45.75],
            zoom: 8.5
        });

        map.on('load', function() {

            map.addSource('COVID', {
                type: 'geojson',
                data: 'C:\Users\rossi.17217\Documents\GitHub\HeyTravel\HeyTravel\HeyTravel\wwwroot\html\Mappa.html'
            });

            map.addLayer({
                id: 'chronopleth',
                type: 'fill',
                source: 'COVID',
                'paint': {
                    'fill-color': "#AA1100",
                    'fill-opacity': {
                        property: 'casi',
                        stops: [
                            [0, 0],
                            [1, 0.15],
                            [20, 0.5],
                            [35, 0.7],
                            [100, 0.8],
                        ]
                    }
                }
            });
        });

        //map.on('click', 'COVID', function(e) {
        //    const queryString = window.location.search;
        //    const urlParams = new URLSearchParams(queryString);
        //    const conflitto = urlParams.get('conflitto');
        //    const mode = urlParams.get('mode');
        //    var HTML = 'Comune di <b>' + e.features[0].properties.NOME_COM + '</b>';
        //    HTML += '<br><a href="http://www.combattentibergamaschi.it/cerca.php?comune=' + encodeURIComponent(e.features[0].properties.NOME_COM).replace(/'/g, '%27') + '&mode=' + mode + '&conflitto=' + conflitto + '" target="_blank">' + e.features[0].properties.NOMINATIVI + ' nominativi</a>';
        //    new mapboxgl.Popup()
        //        .setLngLat(e.lngLat)
        //        .setHTML(HTML)
        //        .addTo(map);
        //});

        //// Change the cursor to a pointer when the mouse is over the states layer.
        //map.on('mouseenter', 'comuni-layer', function () {
        //    map.getCanvas().style.cursor = 'pointer';
        //});

        //// Change it back to a pointer when it leaves.
        //map.on('mouseleave', 'comuni-layer', function () {
        //    map.getCanvas().style.cursor = '';
        //});</script>